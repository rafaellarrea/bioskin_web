<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BIOSKIN - Generador de Blogs Local</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Playfair+Display:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Poppins', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        .card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
        }
        .btn-primary {
            background: linear-gradient(135deg, #deb887 0%, #b8860b 100%);
            border: none;
            transition: all 0.3s ease;
        }
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.3);
        }
        .loading-spinner {
            border: 3px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top: 3px solid #fff;
            width: 20px;
            height: 20px;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        .blog-preview {
            max-height: 500px;
            overflow-y: auto;
        }
        .image-preview {
            max-width: 200px;
            max-height: 150px;
            object-fit: cover;
            border-radius: 8px;
        }
        .step {
            opacity: 0.5;
            transition: all 0.3s ease;
        }
        .step.active {
            opacity: 1;
        }
        .step.completed {
            opacity: 1;
            color: #10b981;
        }
        #blogContent h1 { font-size: 2.5rem; font-weight: 700; margin: 1.5rem 0; color: #1f2937; }
        #blogContent h2 { font-size: 2rem; font-weight: 600; margin: 1.25rem 0; color: #374151; }
        #blogContent h3 { font-size: 1.5rem; font-weight: 500; margin: 1rem 0; color: #4b5563; }
        #blogContent p { margin: 0.75rem 0; line-height: 1.7; }
        #blogContent ul, #blogContent ol { margin: 1rem 0; padding-left: 1.5rem; }
        #blogContent li { margin: 0.5rem 0; }
        #blogContent strong { color: #deb887; }
        #blogContent code { background: #f3f4f6; padding: 2px 4px; border-radius: 4px; }
    </style>
</head>
<body class="p-4">
    <div class="max-w-7xl mx-auto">
        <!-- Header -->
        <div class="card p-6 mb-6">
            <div class="flex items-center justify-between">
                <div>
                    <h1 class="text-3xl font-bold text-gray-800 mb-2">
                        <i class="fas fa-blog text-yellow-600 mr-3"></i>
                        BIOSKIN - Generador de Blogs Local
                    </h1>
                    <p class="text-gray-600">Generación inteligente de blogs con IA y despliegue automático</p>
                </div>
                <div class="text-right">
                    <div class="text-sm text-gray-500 mb-1">Estado del Sistema</div>
                    <div id="systemStatus" class="flex items-center">
                        <div class="w-3 h-3 rounded-full bg-yellow-500 mr-2"></div>
                        <span class="text-sm">Verificando...</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Steps Indicator -->
        <div class="card p-6 mb-6">
            <div class="flex items-center justify-between">
                <div class="step active" id="step1">
                    <i class="fas fa-lightbulb text-2xl mb-2"></i>
                    <div class="text-sm font-medium">1. Tema</div>
                </div>
                <div class="flex-1 h-1 bg-gray-200 mx-4"></div>
                <div class="step" id="step2">
                    <i class="fas fa-robot text-2xl mb-2"></i>
                    <div class="text-sm font-medium">2. Generar</div>
                </div>
                <div class="flex-1 h-1 bg-gray-200 mx-4"></div>
                <div class="step" id="step3">
                    <i class="fas fa-edit text-2xl mb-2"></i>
                    <div class="text-sm font-medium">3. Editar</div>
                </div>
                <div class="flex-1 h-1 bg-gray-200 mx-4"></div>
                <div class="step" id="step4">
                    <i class="fas fa-images text-2xl mb-2"></i>
                    <div class="text-sm font-medium">4. Imágenes</div>
                </div>
                <div class="flex-1 h-1 bg-gray-200 mx-4"></div>
                <div class="step" id="step5">
                    <i class="fas fa-rocket text-2xl mb-2"></i>
                    <div class="text-sm font-medium">5. Desplegar</div>
                </div>
            </div>
        </div>

        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
            <!-- Panel de Control -->
            <div class="card p-6">
                <h2 class="text-2xl font-bold text-gray-800 mb-6">
                    <i class="fas fa-cog mr-2"></i>Panel de Control
                </h2>

                <!-- Tipo de Blog -->
                <div class="mb-6">
                    <label class="block text-sm font-medium text-gray-700 mb-2">Tipo de Blog</label>
                    <select id="blogType" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-transparent">
                        <option value="medico-estetico">Médico Estético</option>
                        <option value="tecnico">Técnico</option>
                    </select>
                </div>

                <!-- Sugerencias de Temas -->
                <div class="mb-6">
                    <label class="block text-sm font-medium text-gray-700 mb-2">
                        Sugerencias de Temas
                        <button id="refreshSuggestions" class="ml-2 text-yellow-600 hover:text-yellow-800">
                            <i class="fas fa-sync-alt"></i>
                        </button>
                    </label>
                    <div id="topicSuggestions" class="grid grid-cols-1 gap-2 mb-4">
                        <!-- Las sugerencias se cargarán aquí -->
                    </div>
                </div>

                <!-- Tema Personalizado -->
                <div class="mb-6">
                    <label for="customTopic" class="block text-sm font-medium text-gray-700 mb-2">
                        Tema Personalizado
                    </label>
                    <textarea 
                        id="customTopic" 
                        rows="3" 
                        placeholder="Escribe aquí tu tema personalizado para el blog..."
                        class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-transparent"
                    ></textarea>
                </div>

                <!-- Botones de Acción -->
                <div class="space-y-3">
                    <button 
                        id="generateBlog" 
                        class="w-full btn-primary text-white py-3 px-6 rounded-lg font-semibold flex items-center justify-center"
                        disabled
                    >
                        <i class="fas fa-magic mr-2"></i>
                        <span>Generar Blog con IA</span>
                    </button>

                    <button 
                        id="saveBlog" 
                        class="w-full bg-green-600 hover:bg-green-700 text-white py-3 px-6 rounded-lg font-semibold flex items-center justify-center"
                        disabled
                        style="display: none;"
                    >
                        <i class="fas fa-save mr-2"></i>
                        <span>Guardar Blog</span>
                    </button>

                    <button 
                        id="deployBlog" 
                        class="w-full bg-blue-600 hover:bg-blue-700 text-white py-3 px-6 rounded-lg font-semibold flex items-center justify-center"
                        disabled
                        style="display: none;"
                    >
                        <i class="fas fa-rocket mr-2"></i>
                        <span>Desplegar al Sitio Web</span>
                    </button>

                    <button 
                        id="showSavedBlogs" 
                        class="w-full bg-purple-600 hover:bg-purple-700 text-white py-3 px-6 rounded-lg font-semibold flex items-center justify-center"
                    >
                        <i class="fas fa-folder-open mr-2"></i>
                        <span>Ver Blogs Guardados</span>
                    </button>
                </div>

                <!-- Status Area -->
                <div id="statusArea" class="mt-6 p-4 rounded-lg bg-gray-50" style="display: none;">
                    <div class="flex items-center">
                        <div class="loading-spinner mr-3"></div>
                        <span id="statusText">Procesando...</span>
                    </div>
                </div>
            </div>

            <!-- Preview del Blog -->
            <div class="card p-6">
                <div class="flex items-center justify-between mb-6">
                    <h2 class="text-2xl font-bold text-gray-800">
                        <i class="fas fa-eye mr-2"></i>Vista Previa
                    </h2>
                    <div class="flex space-x-2">
                        <button id="editMode" class="bg-yellow-600 hover:bg-yellow-700 text-white px-4 py-2 rounded-lg text-sm" style="display: none;">
                            <i class="fas fa-edit mr-1"></i>Editar
                        </button>
                        <button id="previewMode" class="bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded-lg text-sm" style="display: none;">
                            <i class="fas fa-eye mr-1"></i>Vista Previa
                        </button>
                    </div>
                </div>

                <div id="blogPreviewContainer" class="blog-preview">
                    <div id="emptyState" class="text-center text-gray-500 py-16">
                        <i class="fas fa-file-alt text-6xl mb-4 text-gray-300"></i>
                        <p class="text-lg">Selecciona un tema y genera tu blog</p>
                        <p class="text-sm">El contenido aparecerá aquí</p>
                    </div>
                    
                    <div id="blogContent" style="display: none;">
                        <!-- El contenido del blog se mostrará aquí -->
                    </div>

                    <div id="blogEditor" style="display: none;">
                        <div class="space-y-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Título</label>
                                <input type="text" id="editTitle" class="w-full p-3 border border-gray-300 rounded-lg">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Excerpt</label>
                                <textarea id="editExcerpt" rows="2" class="w-full p-3 border border-gray-300 rounded-lg"></textarea>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Contenido (Markdown)</label>
                                <textarea id="editContent" rows="15" class="w-full p-3 border border-gray-300 rounded-lg font-mono text-sm"></textarea>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Tags (separados por comas)</label>
                                <input type="text" id="editTags" class="w-full p-3 border border-gray-300 rounded-lg">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Panel de Imágenes -->
        <div class="card p-6 mt-6" id="imagePanel" style="display: none;">
            <h2 class="text-2xl font-bold text-gray-800 mb-6">
                <i class="fas fa-images mr-2"></i>Gestión de Imágenes
            </h2>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <!-- Subir Imagen -->
                <div class="space-y-4">
                    <h3 class="text-lg font-semibold text-gray-700">Subir Nueva Imagen</h3>
                    <div class="border-2 border-dashed border-gray-300 rounded-lg p-6 text-center">
                        <input type="file" id="imageUpload" accept="image/*" class="hidden">
                        <button id="uploadButton" class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg">
                            <i class="fas fa-upload mr-2"></i>Seleccionar Imagen
                        </button>
                        <p class="text-sm text-gray-500 mt-2">JPG, PNG, WEBP (máx. 10MB)</p>
                        <div id="uploadProgress" class="mt-4" style="display: none;">
                            <div class="w-full bg-gray-200 rounded-full h-2">
                                <div id="uploadProgressBar" class="bg-blue-600 h-2 rounded-full" style="width: 0%"></div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- URL de Imagen -->
                <div class="space-y-4">
                    <h3 class="text-lg font-semibold text-gray-700">URL de Imagen</h3>
                    <div class="space-y-3">
                        <input 
                            type="url" 
                            id="imageUrl" 
                            placeholder="https://ejemplo.com/imagen.jpg"
                            class="w-full p-3 border border-gray-300 rounded-lg"
                        >
                        <button id="addImageUrl" class="w-full bg-green-500 hover:bg-green-600 text-white py-2 px-4 rounded-lg">
                            <i class="fas fa-link mr-2"></i>Añadir desde URL
                        </button>
                    </div>
                </div>
            </div>

            <!-- Imágenes Añadidas -->
            <div class="mt-8">
                <h3 class="text-lg font-semibold text-gray-700 mb-4">Imágenes del Blog</h3>
                <div id="blogImages" class="grid grid-cols-2 md:grid-cols-4 gap-4">
                    <!-- Las imágenes se mostrarán aquí -->
                </div>
            </div>
        </div>

        <!-- Blogs Guardados Modal -->
        <div id="savedBlogsModal" class="fixed inset-0 bg-black bg-opacity-50 z-50" style="display: none;">
            <div class="flex items-center justify-center min-h-screen p-4">
                <div class="card w-full max-w-4xl max-h-[90vh] overflow-y-auto">
                    <div class="p-6">
                        <div class="flex items-center justify-between mb-6">
                            <h2 class="text-2xl font-bold text-gray-800">
                                <i class="fas fa-folder-open mr-2"></i>Blogs Guardados
                            </h2>
                            <button id="closeSavedBlogs" class="text-gray-500 hover:text-gray-700">
                                <i class="fas fa-times text-xl"></i>
                            </button>
                        </div>
                        
                        <div id="savedBlogsMetadata" class="bg-blue-50 p-4 rounded-lg mb-6">
                            <!-- Metadata se cargará aquí -->
                        </div>
                        
                        <div id="savedBlogsList" class="space-y-4">
                            <!-- Lista de blogs se cargará aquí -->
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Logs y Debug -->
        <div class="card p-6 mt-6">
            <div class="flex items-center justify-between mb-4">
                <h3 class="text-lg font-bold text-gray-800">
                    <i class="fas fa-terminal mr-2"></i>Registro de Actividad
                </h3>
                <button id="clearLogs" class="text-sm text-gray-500 hover:text-gray-700">
                    <i class="fas fa-trash mr-1"></i>Limpiar
                </button>
            </div>
            <div id="activityLog" class="bg-gray-50 p-4 rounded-lg h-32 overflow-y-auto font-mono text-sm">
                <div class="text-gray-500">Sistema iniciado. Listo para generar blogs...</div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="js/app.js"></script>
</body>
</html>